<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Time Tracker</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			max-width: 800px;
			margin: 0 auto;
			padding: 20px;
			background-color: #f5f5f5;
		}

		#add-timer {
			width: 100%;
			padding: 15px;
			font-size: 24px;
			background-color: #4CAF50;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			margin-bottom: 20px;
		}

		#add-timer:hover {
			background-color: #45a049;
		}

		.timer {
			background-color: white;
			padding: 20px;
			margin-bottom: 15px;
			border-radius: 5px;
			box-shadow: 0 2px 5px rgba(0,0,0,0.1);
		}

		.timer-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 10px;
		}

		.timer-title {
			font-size: 18px;
			padding: 5px;
			border: 1px solid transparent;
			border-radius: 3px;
			flex-grow: 1;
			margin-right: 10px;
		}

		.timer-title:focus {
			border-color: #4CAF50;
			outline: none;
		}

		.timer-display {
			font-size: 24px;
			color: #333;
			margin: 10px 0;
		}

		.timer-controls button {
			padding: 8px 15px;
			margin-right: 10px;
			border: none;
			border-radius: 3px;
			cursor: pointer;
			font-size: 14px;
		}

		.pause-btn {
			background-color: #ff9800;
			color: white;
		}

		.pause-btn:hover {
			background-color: #f57c00;
		}

		.delete-btn {
			background-color: #f44336;
			color: white;
		}

		.delete-btn:hover {
			background-color: #d32f2f;
		}
	</style>
</head>
<body>
	<button id="add-timer">+</button>
	<div id="timers-container"></div>

	<script>
		class Timer {
			constructor(id, title = 'Untitled Timer') {
				this.id = id;
				this.title = title;
				this.startTime = Date.now();
				this.elapsed = 0;
				this.isRunning = true;
			}
		}

		class TimerApp {
			constructor() {
				this.timers = [];
				this.loadState();
				this.setupEventListeners();
				this.startUpdateLoop();
			}

			loadState() {
				const savedState = localStorage.getItem('timerAppState');
				if (savedState) {
					const parsedState = JSON.parse(savedState);
					this.timers = parsedState.timers;
					this.renderAllTimers();
				}
			}

			saveState() {
				localStorage.setItem('timerAppState', JSON.stringify({
					timers: this.timers
				}));
			}

			addTimer() {
				const newTimer = new Timer(Date.now());
				this.timers.unshift(newTimer);
				this.renderTimer(newTimer);
				this.saveState();
			}

			deleteTimer(id) {
				if (confirm('Are you sure you want to delete this timer?')) {
					this.timers = this.timers.filter(timer => timer.id !== id);
					document.querySelector(`[data-timer-id="${id}"]`).remove();
					this.saveState();
				}
			}

			toggleTimer(id) {
				const timer = this.timers.find(t => t.id === id);
				if (timer) {
					if (timer.isRunning) {
						timer.elapsed += Date.now() - timer.startTime;
						timer.isRunning = false;
					} else {
						timer.startTime = Date.now();
						timer.isRunning = true;
					}
					this.saveState();
					this.updateTimerDisplay(timer);
				}
			}

			updateTitle(id, newTitle) {
				const timer = this.timers.find(t => t.id === id);
				if (timer) {
					timer.title = newTitle;
					this.saveState();
				}
			}

			formatTime(milliseconds) {
				const seconds = Math.floor(milliseconds / 1000);
				const minutes = Math.floor(seconds / 60);
				const hours = Math.floor(minutes / 60);

				if (hours > 0) {
					return `${hours} hour${hours !== 1 ? 's' : ''} ${minutes % 60} minute${minutes % 60 !== 1 ? 's' : ''}`;
				} else if (minutes > 0) {
					return `${minutes} minute${minutes !== 1 ? 's' : ''}`;
				} else {
					return `${seconds} second${seconds !== 1 ? 's' : ''}`;
				}
			}

			renderTimer(timer) {
				const timerElement = document.createElement('div');
				timerElement.className = 'timer';
				timerElement.dataset.timerId = timer.id;

				timerElement.innerHTML = `
					<div class="timer-header">
						<input class="timer-title" type="text" value="${timer.title}">
					</div>
					<div class="timer-display"></div>
					<div class="timer-controls">
						<button class="pause-btn">${timer.isRunning ? 'Pause' : 'Start'}</button>
						<button class="delete-btn">Delete</button>
					</div>
				`;

				const container = document.getElementById('timers-container');
				container.insertBefore(timerElement, container.firstChild);

				this.updateTimerDisplay(timer);
			}

			renderAllTimers() {
				document.getElementById('timers-container').innerHTML = '';
				this.timers.forEach(timer => this.renderTimer(timer));
			}

			updateTimerDisplay(timer) {
				const timerElement = document.querySelector(`[data-timer-id="${timer.id}"]`);
				if (timerElement) {
					const displayElement = timerElement.querySelector('.timer-display');
					const pauseButton = timerElement.querySelector('.pause-btn');
					
					let totalElapsed = timer.elapsed;
					if (timer.isRunning) {
						totalElapsed += Date.now() - timer.startTime;
					}

					displayElement.textContent = this.formatTime(totalElapsed);
					pauseButton.textContent = timer.isRunning ? 'Pause' : 'Start';
				}
			}

			setupEventListeners() {
				document.getElementById('add-timer').addEventListener('click', () => this.addTimer());

				document.getElementById('timers-container').addEventListener('click', (e) => {
					const timerElement = e.target.closest('.timer');
					if (!timerElement) return;

					const timerId = parseInt(timerElement.dataset.timerId);

					if (e.target.classList.contains('pause-btn')) {
						this.toggleTimer(timerId);
					} else if (e.target.classList.contains('delete-btn')) {
						this.deleteTimer(timerId);
					}
				});

				document.getElementById('timers-container').addEventListener('change', (e) => {
					if (e.target.classList.contains('timer-title')) {
						const timerElement = e.target.closest('.timer');
						const timerId = parseInt(timerElement.dataset.timerId);
						this.updateTitle(timerId, e.target.value);
					}
				});
			}

			startUpdateLoop() {
				setInterval(() => {
					this.timers.forEach(timer => {
						if (timer.isRunning) {
							this.updateTimerDisplay(timer);
						}
					});
				}, 1000);

				setInterval(() => {
					if (this.timers.some(timer => timer.isRunning)) {
						this.saveState();
					}
				}, 60000);
			}
		}

		new TimerApp();
	</script>
</body>
</html>
